<main>
  <product-filters/>

  <div class="product-list">
    <div class="list">
      @for (product of $products(); track product.id) {
        <div class="card"
             [class.selected]="product.id === $selectedProductId()"
             (click)="showProduct(product)">

          @if (shoppingCard.lastAdded()?.id === product.id) {
            <h3 class="added-message">Added to Shopping card</h3>
          }

          @if (product.id === $selectedProductId()) {
            <div class="close"
                 (click)="hideProduct($event)">‚ùå
            </div>
          }
          <div class="card-image">
            <img class="product-img"
                 [src]="product.image">
          </div>
          <div class="content">
            <div class="purchase-button"
                 (click)="addToShoppingCard($event, product)">üõçÔ∏è
            </div>
            <p class="card-title"
               [title]="product.title">{{ product.title }}</p>
            <div class="horizontal space-between">
              <div class="rating">{{ product.rating.rate }} / 5 ‚≠ê</div>
              <div class="price">{{ product.price }}‚Ç¨</div>
            </div>
            @if (product.id === $selectedProductId()) {
              <div class="description">{{ product.description }}</div>
            }
          </div>
        </div>
      }
    </div>
  </div>
</main>
